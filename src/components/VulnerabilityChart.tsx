import {
  BarChart,
  Bar,
  ResponsiveContainer,
  XAxis,
  YAxis,
  Tooltip
} from "recharts"

interface Vulnerability {
  cve: string
  description: string
  severity: string
}

interface Props {
  vulnerabilities: Vulnerability[]
}

export function VulnerabilityChart({ vulnerabilities }: Props) {
  // Cuenta cuántas hay por severidad
  const counts = {
    Crítica: 0,
    Alta: 0,
    Media: 0,
    Baja: 0,
  }

  vulnerabilities.forEach(v => {
    counts[v.severity as keyof typeof counts]++
  })

  const data = Object.entries(counts).map(([severity, total]) => ({
    severity,
    total,
  }))

  return (
    <ResponsiveContainer width="100%" height={200}>
      <BarChart data={data}>
<XAxis
  dataKey="severity"
  stroke="var(--tw-text-muted-foreground)"
  fontSize={12}
  tickLine={false}
  axisLine={false}
/>
<YAxis
  stroke="var(--tw-text-muted-foreground)"
  fontSize={12}
  tickLine={false}
  axisLine={false}
/>
<Tooltip
  contentStyle={{
    backgroundColor: "hsl(var(--popover))",
    border: "1px solid hsl(var(--border))",
    color: "hsl(var(--foreground))",
  }}
/>
<Bar
  dataKey="total"
  fill="hsl(var(--primary))"
  radius={[4, 4, 0, 0]}
/>

      </BarChart>
    </ResponsiveContainer>
  )
}
